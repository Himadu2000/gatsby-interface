version: 2

commands:

jobs:
  install:
    docker:
      - image: circleci/node:10
    steps:
      - checkout
      - run:
          name: Install yarn
          command: |
            curl -o- -L https://yarnpkg.com/install.sh
      - run:
          name: Install Dependencies
          command: yarn install

  build:
    docker:
      - image: circleci/node:10
    steps:
      - checkout
      - run:
          name: Build types
          command: yarn build:types
      - run:
          name: Build rollup
          command: yarn build:rollup

    # TODO: fix tests locally and add them to circleci
    test:
      docker:
        - image: circleci/node:10
      steps:
        - checkout
        - run:
            name: Type check
            command: yarn type-check

    lint:
      docker:
        - image: circleci/node:10
      steps:
        - checkout
        - run:
            name: Eslint
            command: yarn lint
        - run:
            name: Prettier
            command: yarn prettier-eslint
